body {
  background-color: #f8f4f4;
}

:root {
  --app-topbar-h: 64px;  /* header height */
  --sidebar-w: 250px;    /* sidebar width */
}

/* Global: add a small gap between adjacent buttons inside tables */
.table .btn + .btn { margin-left: .5rem; }

/* Notification dropdown tweaks */
.dropdown-menu .dropdown-item .fw-semibold { 
  line-height: 1.2; 
}
.dropdown-menu .dropdown-item .small { 
  line-height: 1.2; 
}

/* --- Fix notification dropdown reflow in navbar --- */
.navbar .container,
.navbar .container-fluid {
  align-items: center; /* keep everything vertically centered */
}

.navbar .navbar-nav {
  align-items: center; /* align icons vertically */
}

.navbar .navbar-nav .nav-item {
  flex: 0 0 auto;      /* prevent flex-grow or shrinking */
}

.navbar .dropdown-menu {
  position: absolute !important; /* must float */
  left: auto !important;
  right: 0 !important;           /* snap to the right edge of the bell */
  transform: none !important;    /* avoid transform pushing it around if Popper is missing/overridden */
  will-change: auto;             /* avoid weird GPU side-effects */
  min-width: 360px;              /* your desired width */
}

.navbar .dropdown-menu.show {
  display: block; /* explicit, harmless with absolute positioning */
}

.navbar .lpu-icon {
  height: 28px;   /* optional: keep logo steady */
  width: auto;
}

.navbar.sticky-top {
  overflow: visible; /* ensure dropdown can overflow */
}

/* === Dark Mode (app-wide) =============================================== */
body.dark-mode {
  background-color: #121212;
  color: #e4e4e4;
}

/* Navbar + dropdowns */
body.dark-mode .navbar { background-color: #1f1f1f !important; }
body.dark-mode .dropdown-menu { background-color: #2a2a2a; color: #e4e4e4; }
body.dark-mode .dropdown-item { color: #e4e4e4; }
body.dark-mode .dropdown-item:hover { background-color: #3a3a3a; }

/* Common surfaces */
body.dark-mode .card,
body.dark-mode .modal-content,
body.dark-mode .table,
body.dark-mode .list-group,
body.dark-mode .offcanvas,
body.dark-mode .toast { background-color: #1b1b1b; color: #e4e4e4; border-color: #333; }

/* Inputs */
body.dark-mode .form-control,
body.dark-mode .form-select { background-color: #222; color: #e4e4e4; border-color: #444; }
body.dark-mode .form-control::placeholder { color: #9aa0a6; }

/* Links */
body.dark-mode a { color: #9ecbff; }
body.dark-mode a:hover { color: #c6e0ff; }

/* --- Navbar icon link normalization (matches bell/logout; for settings icon) --- */
.navbar .header-link {
  display: inline-flex;
  align-items: center;
  gap: .25rem;
  padding: .25rem .25rem;
  border: 0;
  background: transparent;
  color: inherit;
  text-decoration: none;
}
.navbar .header-link:hover { opacity: .85; }

/* Remove dropdown caret for a cleaner single-gear look */
.navbar .dropdown-toggle::after { display: none !important; }

/* Ensure icons don't sit inside a white chip */
.navbar .nav-link,
.navbar .header-link {
  background: transparent !important;
  box-shadow: none !important;
}

/* === Dark Mode (robust) ================================================== */
html.dark-mode, body.dark-mode { background-color: #121212; color: #e4e4e4; }

html.dark-mode .navbar,
body.dark-mode .navbar { background-color: #1f1f1f !important; }

html.dark-mode .dropdown-menu,
body.dark-mode .dropdown-menu { background-color: #2a2a2a; color: #e4e4e4; }

html.dark-mode .dropdown-item,
body.dark-mode .dropdown-item { color: #e4e4e4; }

html.dark-mode .dropdown-item:hover,
body.dark-mode .dropdown-item:hover { background-color: #3a3a3a; }

html.dark-mode .card,
body.dark-mode .card,
html.dark-mode .modal-content,
body.dark-mode .modal-content,
html.dark-mode .table,
body.dark-mode .table,
html.dark-mode .list-group,
body.dark-mode .list-group,
html.dark-mode .offcanvas,
body.dark-mode .offcanvas,
html.dark-mode .toast,
body.dark-mode .toast { background-color: #1b1b1b; color: #e4e4e4; border-color: #333; }

html.dark-mode .form-control,
body.dark-mode .form-control,
html.dark-mode .form-select,
body.dark-mode .form-select { background-color: #222; color: #e4e4e4; border-color: #444; }

html.dark-mode .form-control::placeholder,
body.dark-mode .form-control::placeholder { color: #9aa0a6; }

html.dark-mode a, body.dark-mode a { color: #9ecbff; }
html.dark-mode a:hover, body.dark-mode a:hover { color: #c6e0ff; }

/* Navbar icon link normalization */
.navbar .header-link {
  display: inline-flex;
  align-items: center;
  gap: .25rem;
  padding: .25rem .25rem;
  border: 0;
  background: transparent;
  color: inherit;
  text-decoration: none;
}
.navbar .header-link:hover { opacity: .85; }
.navbar .dropdown-toggle::after { display: none !important; }
.navbar .nav-link, .navbar .header-link { background: transparent !important; box-shadow: none !important; }

/* Consistent spacing between topbar icons */
.navbar .navbar-nav.d-flex.flex-row { gap: 1rem; } /* <- equal spacing for bell, gear, logout */

/* === Dark Mode: Tables =================================================== */
html.dark-mode .table {
  background-color: #161616;       /* table body bg */
  color: #e8e8e8;                  /* table text */
}

html.dark-mode .table > :not(caption) > * > * {
  background-color: transparent;   /* let rows control their own bg */
  box-shadow: none;
  border-color: #2d2d2d;           /* cell borders */
}

html.dark-mode .table thead th,
html.dark-mode .table thead td {
  background-color: #1f1f1f;       /* header row bg */
  color: #f2f2f2;
  border-bottom-color: #2d2d2d;
}

html.dark-mode .table tfoot th,
html.dark-mode .table tfoot td {
  background-color: #1b1b1b;       /* footer row bg (if any) */
  color: #e8e8e8;
  border-top-color: #2d2d2d;
}

/* Zebra striping */
html.dark-mode .table.table-striped > tbody > tr:nth-of-type(odd) > * {
  background-color: #181818;
}
html.dark-mode .table.table-striped > tbody > tr:nth-of-type(even) > * {
  background-color: #141414;
}

/* Hover state */
html.dark-mode .table.table-hover > tbody > tr:hover > * {
  background-color: #252525;
}

/* Active/selected row */
html.dark-mode .table .table-active > * {
  background-color: #222222 !important;
}

/* Bordered tables */
html.dark-mode .table-bordered {
  border-color: #2d2d2d;
}

/* Small text contrast helpers */
html.dark-mode .table .text-muted { color: #b9b9b9 !important; }
html.dark-mode .table a { color: #9ecbff; }
html.dark-mode .table a:hover { color: #c6e0ff; }

/* Buttons inside tables (link-style) */
html.dark-mode .table .btn-link { color: #9ecbff; }
html.dark-mode .table .btn-link:hover { color: #c6e0ff; }

/* === Fix: Table cell text color in dark mode  */
html.dark-mode .table td,
html.dark-mode .table th {
  color: #e8e8e8 !important;  /* readable light text */
}

/* Muted text inside tables */
html.dark-mode .table td .text-muted,
html.dark-mode .table th .text-muted {
  color: #a0a0a0 !important;
}

/* === Dark Mode: Pagination (your shared Pagination.php) ================ */
html.dark-mode .pagination .page-link {
  background-color: #1f1f1f;
  color: #e8e8e8;
  border-color: #2a2a2a;
}
html.dark-mode .pagination .page-link:hover {
  background-color: #2a2a2a;
  color: #ffffff;
}
html.dark-mode .pagination .page-item.active .page-link {
  background-color: #670003;   /* brand maroon */
  border-color: #670003;
  color: #ffffff;
}
html.dark-mode .pagination .page-item.disabled .page-link {
  background-color: #151515;
  color: #7a7a7a;
  border-color: #232323;
}

/* App-specific: make .main-content the single scroll container
   Enabled only when <body class="use-main-scroll"> is present */
body.use-main-scroll {
  --app-navbar-h: 64px;  /* adjust to match HeaderComponent.css min/max-height */
  --sidebar-w: 250px;    /* keep in sync with SidebarComponent.css */
}

/* Turn off page-level scrolling and stretch layout to full viewport */
body.use-main-scroll, body.use-main-scroll html, body.use-main-scroll body {
  height: 100%;
}

/* Hide outer scrollbars so only .main-content scrolls.
   We keep this scoped under body.use-main-scroll so other pages are unaffected. */
body.use-main-scroll, body.use-main-scroll html {
  overflow: hidden;
}

/* Ensure .wrapper stretches to the full height */
body.use-main-scroll .wrapper {
  height: 100%;
  display: flex;
  flex-direction: row;
}

/* Make main-content the scroll container that fills the remaining area.
   Height = viewport - navbar height. If your navbar is sticky and sits above
   the .main-content, use the same navbar height here for accurate sizing. */
body.use-main-scroll .main-content {
  box-sizing: border-box;
  height: calc(100vh - var(--app-navbar-h, 64px));
  overflow-y: auto;
  -webkit-overflow-scrolling: touch; /* smooth scrolling on iOS */
  padding-left: 1rem;  /* preserve left/right breathing inside main content */
  padding-right: 1rem;
}

/* If the .sidebar is fixed (it is), keep main-content offset as before */
body.use-main-scroll .main-content {
  margin-left: 250px; /* keep same as SidebarComponent.css if required */
  width: calc(100% - 250px);
}

/* Make the sticky header (the container that includes title + toolbar)
   stick to the top of the main-content scroll container (not the viewport).
   top:0 ensures it hugs the main-content top edge (which sits under the navbar). */
body.use-main-scroll .rt-sticky-header {
  position: sticky;
  top: 0;          /* local to main-content scrolling box */
  z-index: 1031;
  background: #fff;
  /* horizontal padding kept by .rt-sticky-header (collab-editor.css) */
}

/* Make sure toolbar dropdowns still float above everything */
body.use-main-scroll .rt-sticky-header .dropdown-menu,
body.use-main-scroll .rt-sticky-header .popover,
body.use-main-scroll .rt-sticky-header .tooltip {
  z-index: 1080;
}

/* Safety: if any page-level layout previously forced overflow on .main-content,
   this rule wins because it's more specific when body.use-main-scroll present. */
body.use-main-scroll .main-content[style] { overflow-y: auto !important; }

/* Add extra margin to modals so they don't clip against the top navbar */
.modal-dialog {
  margin: 4.5rem auto 1.5rem !important;
}