/* /public/assets/css/TemplateBuilder-New.css
   ISO 25010: Maintainability (Modularity + Readability)
   - Structured sections
   - Deduped rules (tables, footer, padding)
   - Consistent tokens, comments, and states
   - Kept visual behavior intact
*/

/* =========================================================
   0) Design Tokens
   ========================================================= */
:root{
  --maroon: #660003;
  --bg: #eef1f4;

  --page-shadow: 0 4px 24px rgba(16,24,40,.08);
  --page-border: #e5e7eb;

  --sidebar-bg: #f8f9fb;
  --sidebar-border: #e5e7eb;

  /* Paper sizes (px at 96dpi) */
  --A4-w: 794px;
  --A4-h: 1123px;
  --Letter-w: 816px;
  --Letter-h: 1056px;
  --Legal-w: 816px;
  --Legal-h: 1344px;

  /* Layout */
  --topbar-h: 56px;
  --sb-w: 320px;
  --sb-w-collapsed: 48px;

  /* Typography */
  --font-ui: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --color-muted: #6b7280;
  --color-muted-2: #64748b;
  --color-stroke: #d1d5db;
  --color-stroke-2: #cbd5e1;

  --print-line-w: 0.6pt; 
  --print-line: var(--print-line-w) solid #000; 
}

/* =========================================================
   1) Resets & Base
   ========================================================= */
*{ box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  font-family: var(--font-ui);
}

/* =========================================================
   2) Topbar (maroon bar + centered toolbar)
   ========================================================= */
#mc-topbar { position: relative; top: 0; z-index: 1040; }
.bg-maroon{ background: var(--maroon, #7b0f14); }

/* layout inside the bar */
#mc-topbar .container-fluid {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: .25rem;
  flex-wrap: wrap;
  min-height: var(--topbar-h);
  padding: .25rem 0;
}

/* logo (clickable) */
.mc-logo-link{
  position: absolute;
  left: 8px;
  top: 50%;
  transform: translateY(-50%);
  display: block;
  padding: 4px;
  border-radius: 6px;
}
.mc-logo-link:focus-visible{
  outline: 2px solid rgba(255,255,255,.6);
  outline-offset: 2px;
}
.mc-logo{
  height: 64px;
  width: auto;
  display: block;
}

/* right actions */
.mc-actions{
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  gap: .25rem;
}
.mc-actions .btn,
.mc-actions .btn-icon{
  border: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
  padding: .35rem !important;
  min-width: 36px;
  min-height: 36px;
}
#mc-topbar .mc-actions .btn-icon{ padding: .2rem !important; min-width: 32px; min-height: 32px; }
.mc-actions .btn-icon i{ font-size: 1.25rem; line-height: 1; }
.mc-actions .btn-icon:hover,
.mc-actions .btn:hover{ background: transparent !important; opacity: .85; }
.mc-actions .btn:focus-visible,
.mc-actions .btn-icon:focus-visible{
  outline: 2px solid rgba(255,255,255,.6);
  outline-offset: 2px;
}

/* controls look on maroon */
#mc-topbar .form-select,
#mc-topbar .btn {
  height: calc(2rem + 2px);
  line-height: 1.25rem;
  padding: .375rem .5rem;
  border-radius: .5rem;
  border-color: rgba(255,255,255,.25);
}
#mc-topbar .form-select{
  background-color: rgba(255,255,255,.1);
  color: #fff;
}
#mc-topbar .form-select option{ color: #000; }

#mc-topbar .form-control-color{
  height: calc(2rem + 2px);
  width: 40px;
  padding: 2px;
  border-radius: .5rem;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.1);
}

.top-label{ font-size: .8rem; opacity: .9; }
.top-select{ width: 120px; }

/* toolbar buttons */
#mc-topbar .btn-icon{
  background: transparent;
  color: #fff;
  border: 1px solid rgba(255,255,255,.25);
  border-radius: .4rem;
  padding: .25rem .4rem;
  font-size: .85rem;
  line-height: 1;
}
#mc-topbar .btn-icon:hover{ background: rgba(255,255,255,.12); }

#tt-toolbar{
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: .25rem;
}
#tt-toolbar .btn-icon i{ font-size: .9rem; }
#tt-toolbar .btn-icon.active{
  background: rgba(255,255,255,.16)!important;
  border-color: rgba(255,255,255,.4)!important;
}
.toolbar-sep{
  width: 1px; height: 24px;
  background: rgba(255,255,255,.25);
  margin: 0 .25rem;
}

.dropdown-menu-dark .dropdown-item{ font-size: .9rem; }

/* =========================================================
   3) Shell Layout (work area + sidebar)
   ========================================================= */
#gutter, .gutter{ display: none !important; }

#mc-shell{
  display: grid;
  grid-template-columns: minmax(0,1fr) var(--sb-w, 320px);
  transition: grid-template-columns .2s ease;
  height: calc(100vh - var(--topbar-h, 56px));
  min-height: 0;
}

#mc-shell.sb-collapsed{
  grid-template-columns: minmax(0,1fr) var(--sb-w-collapsed, 48px);
}

/* Work area is the only scroll container */
#mc-work{
  overscroll-behavior: contain;
  overflow: auto;
  min-height: 0;
  padding: 16px 0 64px;

  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 35px;
  width: 100%;
}

/* Sidebar */
#mc-sidebar{
  position: sticky;
  top: var(--topbar-h, 56px);
  height: calc(100vh - var(--topbar-h, 56px));
  overflow: auto;
  background: var(--sidebar-bg);
  border-left: 1px solid var(--sidebar-border);
  padding: 12px;
  width: var(--sb-w);
  transition: width .2s ease, padding .2s ease;
  z-index: 2;
}
#mc-shell.sb-collapsed #mc-sidebar{
  width: var(--sb-w-collapsed);
  padding: 8px;
}
#mc-shell.sb-collapsed #mc-sidebar .d-grid{ display: grid; gap: 8px; }
#mc-shell.sb-collapsed #mc-sidebar .d-grid .sb-item:not(#sb-toggle){ display: none; }

#sb-toggle{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 8px 10px;
  margin-bottom: 8px;
  border: 1px solid #d9dce3;
  border-radius: 8px;
  background: #fff;
  color: #111827;
  cursor: pointer;
}
#sb-toggle:hover{ background: #f8fafc; }

.sb-item{
  display: flex;
  align-items: center;
  gap: 8px;
  border: 1px solid #d9dce3;
  background: #fff;
  color: #111827;
  padding: 8px 10px;
  border-radius: 8px;
  text-align: left;
  cursor: grab;
}
.sb-item:active{ cursor: grabbing; }
.sb-item:hover{ background: #f8fafc; }

/* =========================================================
   4) Pages
   ========================================================= */
.page{
  flex: 0 0 auto;
  width: var(--A4-w);
  height: var(--A4-h);          /* fixed page height */
  background: #fff;
  border: 1px solid var(--page-border);
  border-radius: 6px;
  box-shadow: var(--page-shadow);
  overflow: hidden;
  position: relative;
  padding-bottom: 56px;         /* footer space */
  display: block;
}
.page:focus{ outline: none; box-shadow: var(--page-shadow); }

.page .page-footer{
  position: absolute;
  left: 32px;
  right: 32px;
  bottom: 24px;
}

/* Paper sizes */
.page.size-A4{ width: var(--A4-w); height: var(--A4-h); }
.page.size-Letter{ width: var(--Letter-w); height: var(--Letter-h); }
.page.size-Legal{ width: var(--Legal-w); height: var(--Legal-h); }

/* Header */
.page-header{
  position: relative;
  z-index: 2;
  border-bottom: 1px solid var(--page-border);
  padding: 16px 20px 12px 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.header-center{ max-width: 80%; margin: 0 auto; text-align: center; }
.page-header .title[contenteditable],
.page-header .subtitle[contenteditable]{ cursor: text; outline: none; }
.page-header .title{ margin: 0 0 4px; font-weight: 700; font-size: 1.35rem; }
.page-header .subtitle{ margin: 0; font-size: .95rem; color: var(--color-muted); }
.page-header .subtitle[contenteditable="true"]:empty::before{
  content: "Enter Subtitle";
  color: #9ca3af;
}
.page-header .subtitle[contenteditable="true"]:empty{
  min-height: 1.2em;   /* makes it easier to click into */
}
/* Defaults that new/unformatted text will inherit */
.page .ProseMirror {
  font-family: var(--doc-font, "Times New Roman");  /* fallback same as your UI default */
  font-size:   var(--doc-size, 16px);
}

/* Logo uploader (left) */
.logo-upload{
  position: absolute;
  left: 24px; top: 50%; transform: translateY(-50%);
  width: 72px; height: 72px;
  display: grid; place-items: center;
  cursor: pointer;
  overflow: hidden;                 /* <— ensure anything beyond the square is clipped */
}
.logo-upload .logo-fallback{
  width: 100%; height: 100%;
  border: 1px dashed var(--color-stroke-2);
  border-radius: 4px; display: block;
}
.logo-upload img{
  width: 100%; height: 100%;
  object-fit: cover;                /* <— crops to the square */
  border-radius: 4px;
  display: none; background: transparent;
}

/* SHOW when data-has-image="1" (matches your JS) */
.logo-upload[data-has-image="1"] .logo-fallback{ display: none; }
.logo-upload[data-has-image="1"] img{ display: block; }


/* Footer (editable left text only) */
.page-footer{
  position: absolute;
  left: 16px; right: 16px; bottom: 12px;
  display: flex; justify-content: space-between; align-items: center;
  font-size: 12px; color: var(--color-muted); pointer-events: auto;
}
.page-footer .footer-left[contenteditable="true"]{
  min-width: 24px; outline: none; border-bottom: 1px dashed transparent;
}
.page-footer .footer-left[contenteditable="true"]:focus{ border-bottom-color: #cbd5e1; }
.page-footer .footer-left:empty:before{
  content: attr(data-placeholder);
  color: #9ca3af;
}

/* =========================================================
   5) Editor Region (TipTap host within page)
   ========================================================= */
.page .tiptap{
  position: absolute;
  left: 0; right: 0;
  top: var(--content-top, 40px);
  bottom: var(--content-bottom, 20px);
  padding: 24px 28px 72px; /* bottom pad unified */
  overflow: hidden;        /* no inner scrollbars */
}

.tiptap:focus{
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
}

.tiptap p{ margin: 0 0 .75rem; }
.tiptap h1{ font-size: 1.5rem;   margin: 1rem 0 .5rem; }
.tiptap h2{ font-size: 1.25rem;  margin: 1rem 0 .5rem; }
.tiptap h3{ font-size: 1.125rem; margin: 1rem 0 .5rem; }
.tiptap blockquote{ border-left: 4px solid #e5e7eb; padding-left: 12px; color: var(--color-muted); }
.tiptap pre{
  background: #0b1020; color: #e2e8f0;
  padding: 10px; border-radius: 8px; overflow: auto;
}
.tiptap a{ color: #0d6efd; text-decoration: underline; }

/* =========================================================
   6) TipTap Tables (generic + signature)
   ========================================================= */
/* Generic tables: keep inside page, shrink proportionally */
.tiptap .tableWrapper{
  max-width: 100% !important;
  overflow-x: auto;                 /* safety for huge pastes */
}
.tiptap .tableWrapper table{
  width: 100% !important;
  min-width: 0 !important;
  table-layout: fixed !important;
}

/* Base table look */
.tiptap table{
  width: 100% !important;
  max-width: 100% !important;
  table-layout: fixed !important;
  border-collapse: collapse;
  border-spacing: 0;
  margin: 0;                        /* no extra margins pushing out */
  word-break: break-word;
  overflow-wrap: anywhere;
}
.tiptap th, .tiptap td{
  border: 1px solid var(--color-stroke);
  padding: 10px 12px;
  vertical-align: top;
  line-height: 1.4;
  max-width: 1px;                   /* allow proportional shrink */
  white-space: normal;
}

/* Header cells optional style */
.tiptap th{
  font-weight: 600;
  background: #f8fafc;
}

/* Space around any table */
.tiptap .ProseMirror table{ margin-block: 12px; }

/* Make empty paragraphs show as a visible gap
   (so inserted <p></p> after tables is clear) */
.tiptap .ProseMirror p:empty{ min-height: 1em; }

/* --- Signature tables (flagged as .sig-table or data-sig="1") --- */
.tiptap table.sig-table,
.tiptap .ProseMirror table.sig-table,
.tiptap .ProseMirror table[data-sig="1"]{
  width: 100% !important;
  table-layout: fixed !important;
  margin-block: 16px;
}
.tiptap table.sig-table td,
.tiptap table.sig-table th{
  border: none;                     /* override generic border */
  padding: 10px 12px;
  vertical-align: top;
}

/* “Card” feel inside each sig cell when you wrap content */
.tiptap table.sig-table td.sig-cell{
  border: 1px dashed #d9dce3;
  border-radius: 8px;
  background: #fff;
  padding: 8px;
  display: grid;
  grid-template-rows: 1fr auto auto auto; /* Upload, Name, Date, Role */
  gap: 8px;
}

/* Signature table gridlines (override) */
.tiptap table.sig-table,
.tiptap .ProseMirror table.sig-table,
.tiptap .ProseMirror table[data-sig="1"]{
  width: 100% !important;
  table-layout: fixed !important;
  border-collapse: collapse;
}

.tiptap table.sig-table td,
.tiptap .ProseMirror table.sig-table td,
.tiptap .ProseMirror table[data-sig="1"] td{
  border: 1px solid var(--color-stroke-2);
  padding: 10px 12px;
  vertical-align: top;
}

/* extra room for upload row */
.tiptap table.sig-table tr:first-child td,
.tiptap .ProseMirror table.sig-table tr:first-child td,
.tiptap .ProseMirror table[data-sig="1"] tr:first-child td{
  padding: 12px;
}


/* Placeholders inside signature cells */
.tiptap table.sig-table td[data-ph]{ position: relative; }
.tiptap table.sig-table td[data-ph] > p[data-ph]:empty::before{
  content: attr(data-ph);
  position: absolute;
  left: 10px; top: 6px;
  color: #9ca3af;
  pointer-events: none;
}
@supports(selector(:has(*))){
  .tiptap table.sig-table td[data-ph]:has(> p[data-ph]:only-child > br:only-child)::before{
    content: attr(data-ph);
    position: absolute;
    left: 10px; top: 6px;
    color: #9ca3af; pointer-events: none;
  }
}

/* TipTap / ProseMirror column resize handles (SCREEN) */
.ProseMirror .column-resize-handle{
  position: absolute;
  right: -3px;        /* small overhang so it's easy to grab */
  top: 0;
  bottom: 0;
  width: 8px;         /* bigger hit area */
  cursor: col-resize;
  background: transparent;
  z-index: 5;
}

/* Editor shows col-resize cursor while dragging */
.ProseMirror.resize-cursor { cursor: col-resize; cursor: ew-resize; }

/* The handle is absolutely positioned inside the cell — make cells positioned */
.ProseMirror td,
.ProseMirror th { position: relative; }

/* Keep signature tables fixed-size (no resizers) */
.ProseMirror table.sig-table .column-resize-handle { display: none !important; }

/* The table wrapper is the scroll container; allow absolute children */
.tiptap .tableWrapper { position: relative; }


/* Upload box look (table version + node view) */
.tiptap .sig-img{
  aspect-ratio: 4 / 3;
  display: grid; place-items: center;
  background: #f8fafc;
  border: 1px dashed var(--color-stroke-2);
  border-radius: 6px;
  font-size: 14px; color: #111827;
}
.tiptap .mc-upload-box{
  display: grid; place-items: center;
  width: 100%; aspect-ratio: 4/3;
  background: #f8fafc;
  border: 1px dashed var(--color-stroke-2);
  border-radius: 6px; padding: 6px;
}
.tiptap td .mc-upload-box{ width: 100%; }
.tiptap .mc-upload-img{
  max-width: 100%; max-height: 100%;
  object-fit: contain; display: none;
}
.tiptap .mc-upload-btn{
  border: 1px solid #e5e7eb; background: #fff;
  padding: 6px 10px; border-radius: 6px;
  font-size: 12px; line-height: 1; cursor: pointer;
}
.tiptap .mc-upload-btn:hover{ background: #f8fafc; }

/* Show/hide states for UploadBox node */
.tiptap .mc-upload-box[data-has-image="1"] .mc-upload-img{ display: block; }
.tiptap .mc-upload-box[data-has-image="1"] .mc-upload-btn{ display: none; }
.tiptap .mc-upload-box .mc-upload-img[src]{ display: block; }

/* Signature “labels” and line/date */
.tiptap .sig-name,
.tiptap .sig-role,
.tiptap .sig-date{ font-size: 12px; color: #111827; line-height: 1.25; }
.tiptap .sig-name{ position: relative; padding-top: 6px; }
.tiptap .sig-name::before{
  content: ""; position: absolute; left: 0; right: 0; top: 0;
  border-top: 1px solid #9ca3af;
}
.tiptap .sig-date{ display: flex; align-items: center; gap: 6px; }
.tiptap .sig-date .sig-date-blank{ color: var(--color-muted); }
.tiptap .sig-date .muted{ color: var(--color-muted-2); white-space: nowrap; }
.sig-table .sig-date-input{
  width: 100%; padding: 4px 6px;
  border: 1px solid var(--color-stroke-2);
  border-radius: 6px; font-size: 12px;
}
.sig-table td[data-ph="Date"] p{
  display: inline-block; width: 100%;
  padding: 4px 6px; border: 1px solid var(--color-stroke-2);
  border-radius: 6px; line-height: 1.2;
}

/* --- Signature date input (screen vs print) --- */
.tiptap .mc-date-box {
  display: flex;
  align-items: center;
}
.tiptap .sig-date-input {
  width: 100%;
  padding: 4px 6px;
  border: 1px solid var(--color-stroke-2);
  border-radius: 6px;
  font-size: 12px;
  line-height: 1.2;
  background: #fff;
  color: #111827;
}

/* --- Signature date: on screen show input, on print show plain text --- */
@media print {
  /* hide the actual input */
  .sig-table .sig-date-input,
  .mc-date-box > input.sig-date-input { display: none !important; }

  /* show the chosen value pulled from data-value */
  .mc-date-box::after {
    content: attr(data-value);
    font: inherit;
    color: #111827;
    border: 1px solid #cbd5e1;
    border-radius: 6px;
    padding: 4px 6px;
    min-height: 28px;
    display: inline-block;
    width: 100%;
    line-height: 1.2;
    box-sizing: border-box;
  }
}

/* =========================================================
   7) Floating Table Toolbar (global, above pages)
   ========================================================= */
.tt-tablebar{
  position: fixed;
  z-index: 4000;
  display: none;                /* JS toggles to flex */
  gap: .25rem;
  padding: .25rem .35rem;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  box-shadow: 0 6px 20px rgba(0,0,0,.08);
}
.tt-tablebar .btn{
  border: 1px solid #e5e7eb; background: #fff;
  border-radius: 6px; padding: 2px 6px;
  font-size: 12px; line-height: 1.2; cursor: pointer;
}
.tt-tablebar .btn:hover{ background: #f8fafc; }
.tt-tablebar .sep{ width: 1px; height: 16px; background: #e5e7eb; }
.tt-tablebar .tt-bar-hint{
  position: absolute;
  bottom: calc(100% + 6px);
  left: 50%; transform: translateX(-50%);
  background: #111827; color: #fff;
  font-size: 12px; line-height: 1.3;
  padding: 6px 8px; border-radius: 6px;
  box-shadow: 0 6px 18px rgba(0,0,0,.18);
  white-space: nowrap; pointer-events: none; z-index: 1;
}

/* =========================================================
   8) TB-like Blocks (overlay-style in-editor look)
   ========================================================= */
.tb-block{ position: relative; padding-left: 28px; margin: 18px 0; }
.tb-block .tb-handle{
  position: absolute; left: 0; top: 6px;
  width: 22px; height: 18px;
  display: flex; align-items: center; justify-content: center;
  color: #6b7280; cursor: grab; user-select: none;
}
.tb-block .tb-handle::before{ content:"\22EE"; font-size: 18px; line-height: 1; }
.tb-block .tb-handle:active{ cursor: grabbing; }
.tb-block .tb-body{ width: 100%; }

.tb-label [data-ce]{ font-weight: 700; letter-spacing: .02em; }
.tb-paragraph [data-ce]{ white-space: pre-wrap; }

.tb-input-line{
  border: 1px solid #111;
  border-radius: 4px;
  padding: 8px 10px;
  min-height: 38px;
}
.tb-input-line[data-ce]:empty::before{ content:"Text Field"; color:#9ca3af; }

.tb-textarea{
  border: 1px solid #111;
  border-radius: 4px;
  min-height: 160px;
  padding: 12px;
}
.tb-textarea[data-ce]:empty::before{ content:"Text Area"; color:#9ca3af; }

.tb-table table{ width: 100%; border-collapse: collapse; table-layout: fixed; }
.tb-table td{ border: 1px solid var(--color-stroke-2); padding: 10px; vertical-align: top; }
.tb-table td[data-ce]:empty::before{ content:"TABLE"; color:#9ca3af; }

/* Signature row (4 columns) */
.tb-signatures .sig-grid{
  display: grid; grid-template-columns: repeat(4,1fr); gap: 28px;
}
.tb-signatures .sig-box{
  border: 1px dashed var(--color-stroke-2);
  border-radius: 8px; height: 58px;
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 8px;
}
.tb-signatures .sig-labels{
  border-top: 2px solid #111;
  padding-top: 6px; text-align: center; font-size: 13px; color: #111;
}
.tb-signatures .sig-labels span{ display: block; line-height: 1.3; }
.tb-signatures .sig-labels .muted{ color: var(--color-muted); }

/* Visual drop marker when reordering */
.tb-drop-marker{
  height: 8px; margin: 4px 0;
  outline: 2px dashed #9ca3af; outline-offset: -3px;
}

/* =========================================================
   9) Overlay Blocks (free-positioned)
   ========================================================= */
.page.drag-over{
  box-shadow: 0 0 0 3px rgba(123,15,20,.25), var(--page-shadow);
}

/* remove outer box for these three */

.mc-block-overlay { z-index: 1; pointer-events: none; }
.mc-block.mc-textfield,
.mc-block.mc-label,
.mc-block.mc-paragraph{
  border: none !important;
  background: transparent !important;
  box-shadow: none !important;
}
.element-body{ color: inherit; }
.mc-textfield .element-body{ border-bottom: 1px solid #9ca3af; }
.mc-label .element-body,
.mc-paragraph .element-body{ border: 0; }

/* =========================================================
   10) Misc (grips, inline toolbars for table resizing)
   ========================================================= */
.mc-table-toolbar{
  position: absolute;
  right: 10px; top: -12px;
  display: flex; gap: 6px; align-items: center;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 4px 6px;
  box-shadow: 0 2px 10px rgba(16,24,40,.05);
  opacity: 0; pointer-events: none; transition: opacity .15s ease; z-index: 3;
}
.mc-table-active .mc-table-toolbar{ opacity: 1; pointer-events: auto; }
.mc-table-toolbar button{
  border: 1px solid #e5e7eb; background: #fff;
  border-radius: 6px; padding: 2px 6px;
  font-size: 12px; line-height: 1.2; cursor: pointer;
}
.mc-table-toolbar button:hover{ background: #f8fafc; }
.mc-table-toolbar .sep{ width: 1px; height: 16px; background: #e5e7eb; }

/* resize grips */
.mc-col-grips,
.mc-row-grips{ position: absolute; inset: 0; pointer-events: none; z-index: 2; }
.mc-grip-x,
.mc-grip-y{ position: absolute; background: transparent; pointer-events: auto; }
.mc-grip-x{ width: 6px; cursor: col-resize; top: 0; bottom: 0; }
.mc-grip-y{ height: 6px; cursor: row-resize; left: 0; right: 0; }
.mc-grip-x::before,
.mc-grip-y::before{
  content: ''; position: absolute; inset: 0;
  background: rgba(123,15,20,.08); opacity: 0; transition: opacity .12s; border-radius: 2px;
}
.mc-grip-x:hover::before,
.mc-grip-y:hover::before{ opacity: 1; }

/* === PRINT: single source of truth, no missing borders === */
@page { margin: 12mm; }

@media print {
  /* Hide app chrome */
  #mc-topbar, #mc-sidebar, .gutter, .mc-actions { display: none !important; }

  /* Only print the page canvas */
  body * { visibility: hidden !important; }
  #mc-work, #mc-work * { visibility: visible !important; }

  /* Layout for print */
  #mc-shell { display: block !important; }
  #mc-work  { overflow: visible !important; padding: 0 !important; margin: 0 auto !important; width: auto !important; background: #fff !important; }
  .page {
    box-shadow: none !important;
    border: 0 !important;
    break-after: page;
    break-inside: avoid;
    -webkit-region-break-inside: avoid;
  }

  /* Paper sizes in real units */
  .page.size-A4     { width: 210mm !important; min-height: 297mm !important; }
  .page.size-Letter { width: 216mm !important; min-height: 279mm !important; }
  .page.size-Legal  { width: 216mm !important; min-height: 356mm !important; }

  /* --- TABLES: robust, lossless borders --- */

  /* Stop P↔TABLE margin collapse by using wrapper padding (not table margins) */
  .tiptap .tableWrapper { padding-block: 8px !important; }
  .ProseMirror table { margin-block: 0 !important; }

  /* Draw the full outer frame and all interior lines */
  .ProseMirror table {
    width: 100% !important;
    border-collapse: collapse !important;
    border: var(--print-line) !important;      /* outer edge */
  }
  .ProseMirror th,
  .ProseMirror td {
    border: var(--print-line) !important;      /* interior grid */
  }
  /* Ensure every interior separator exists */
  .ProseMirror table tr + tr > * { border-top: var(--print-line) !important; }
  .ProseMirror table tr > * + * { border-left: var(--print-line) !important; }

  /* Signature tables get the same treatment */
  .ProseMirror table.sig-table { border: var(--print-line) !important; }
  .ProseMirror table.sig-table th,
  .ProseMirror table.sig-table td { border: var(--print-line) !important; }

  /* No outlines → prevents double-thick left/right edges */
  .ProseMirror table,
  .ProseMirror table.sig-table {
    outline: none !important;
    outline-offset: 0 !important;
  }

  /* Upload boxes: solid borders in print */
  .mc-upload-box { border: var(--print-line) !important; background: none !important; }

  /* Date input: show chosen value as plain text box */
  .sig-date-input, .mc-date-box > input { display: none !important; }
  .mc-date-box::after {
    content: attr(data-value);
    display: inline-block;
    width: 100%;
    border: var(--print-line) !important;
    padding: 4px 6px;
    min-height: 1.8em;
    line-height: 1.2;
    box-sizing: border-box;
    color: #000;
    font: inherit;
  }

  /* Color fidelity */
  * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
}
